@model Domain.Entities.Area

@{
    ViewBag.Title = "ShowOnMap";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Объект № @Model.AreaID, цена - @Model.MonthPrice</h2>

<div style="width:1024px;height: 500px" id="map"></div>

@Scripts.Render("~/bundles/jqueryval")
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"> </script>

<script type="text/javascript">

    //function GetTravelMode(id) {
    //    //alert("in function, id = " + id);
    //    switch (id) {
    //        case "1":     //авто
    //            //alert("авто");
    //            return google.maps.TravelMode.DRIVING;
    //            break;
    //        case "2":     //вело
    //            //alert("вело");
    //            //return google.maps.TravelMode.BICYCLING;
    //            return google.maps.BicyclingLayer();
    //            break;
    //        case "3":     // общественный транспорт
    //            //alert("общ");
    //            return google.maps.TravelMode.TRANSIT;
    //            break;
    //        case "4":     // пешком
    //            //alert("пешком");
    //            return google.maps.TravelMode.WALKING;
    //            break;
    //        default:    // авто по дефолту
    //            return google.maps.TravelMode.DRIVING;
    //            break;
    //    }
    //};

    //function clearOverlays() {
    //    alert("mark");
    //    alert("markersArray.length = " + markersArray.length);
    //    directionsDisplay.setMap(null);////////////
    //    map.clearOverlays();
    //    for (var i = 0; i < markersArray.length; i++) {
    //        alert(i.valueOf());
    //        markersArray[i].setMap(null);
    //    }
    //    markersArray.length = 0;
    //};

    //$(function () {

    //    var markersArray = [];

    //    //var latlng = new google.maps.LatLng(50.5286765, 30.7943148);
    //    //var centerlatlng = new google.maps.LatLng(50.5280081, 30.7946045);
    //    var latlng = new google.maps.LatLng(50.4481346,30.5201511);
    //    var centerlatlng = new google.maps.LatLng(50.4481346,30.5231511);

    //    var myOptions = {
    //        zoom: 16,
    //        center: centerlatlng,
    //        mapTypeId: google.maps.MapTypeId.ROADMAP   // улицы
            //mapTypeId: google.maps.MapTypeId.SATELLITE   //спутник
        //};
        //var map = new google.maps.Map(document.getElementById("map"), myOptions);



        //$('#Clear').click(function () {
        //    clearOverlays();
        //});


        $(document).ready(function () {

            //var marker = new google.maps.Marker({
            //    position: latlng,
            //    map: map,
            //    title: 'Hello World!'
            //});

            var address = @Model.RentAreaAddressRegion + " обл., " + @Model.RentAreaAddressCity + ", " + @Model.RentAreaAddressStreet;
            $.getJSON('http://maps.googleapis.com/maps/api/geocode/json?address=' + address + '&sensor=false', null, function (data) {
                var p = data.results[0].geometry.location;
                var latlng = new google.maps.LatLng(p.lat, p.lng);

                var directionsDisplay = new google.maps.DirectionsRenderer();
                var directionsService = new google.maps.DirectionsService();
                directionsDisplay.setMap(map);
                directionsDisplay.setOptions({ suppressMarkers: true, suppressInfoWindows: true });
                //var travelModeId = $('#TravelMode').val();
                //var travelMode = GetTravelMode(travelModeId);
                //var travelMode = google.maps.TravelMode.WALKING;
                //var endPoint = new google.maps.LatLng(50.4492345, 30.5064439); 
                //    var request = {
                //        origin: latlng,
                //        destination: endPoint,
                //        travelMode: travelMode, 
                //        unitSystem: google.maps.UnitSystem.METRIC,
                //        waypoints: [
                //         {
                //             location: latlng,
                //             stopover: false
                //         },
                //         {
                //             location: endPoint,
                //             stopover: true
                //         }
                //        ],
                //        optimizeWaypoints: true,
                //        provideRouteAlternatives: true,
                //        avoidHighways: true,
                //        avoidTolls: true
                //    };
                //    directionsService.route(request, function (result, status) {
                //        if (status == google.maps.DirectionsStatus.OK) {
                //            directionsDisplay.setDirections(result);
                //            var routes = result.routes;
                //        }
                //    });
                //});
                //markersArray.push(marker);
                //google.maps.event.addListener(marker, "click", function () { });
            });

 });
</script>



